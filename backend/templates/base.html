<!DOCTYPE html>
<html lang="tr" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="ScreenShare Pro" />
    <meta name="application-name" content="ScreenShare Pro" />
    <meta name="theme-color" content="#0a0f1a" />
    <meta name="msapplication-TileColor" content="#0a0f1a" />
    <meta
      name="msapplication-TileImage"
      content="/static/icons/icon-144x144.png"
    />
    <meta
      name="description"
      content="Güvenli ekran paylaşımı platformu - By Erkan ERDEM"
    />

    <!-- PWA Manifest -->
    <link rel="manifest" href="/static/manifest.json" />

    <!-- Favicons -->
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/static/icons/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/static/icons/favicon-16x16.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/static/icons/apple-touch-icon.png"
    />

    <!-- iOS Splash Screens -->
    <link
      rel="apple-touch-startup-image"
      href="/static/icons/icon-512x512.png"
    />

    <title>{% block title %}ScreenShare Pro{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
      rel="stylesheet"
    />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#136dec",
              "primary-hover": "#1058c7",
              "background-dark": "#0a0f1a",
              "surface-dark": "#111827",
              "surface-hover": "#1f2937",
              "border-dark": "#1f2937",
              "text-secondary": "#9ca3af",
            },
            fontFamily: {
              display: ["Inter", "sans-serif"],
            },
            spacing: {
              "safe-top": "env(safe-area-inset-top)",
              "safe-bottom": "env(safe-area-inset-bottom)",
              "safe-left": "env(safe-area-inset-left)",
              "safe-right": "env(safe-area-inset-right)",
            },
          },
        },
      };
    </script>
    <style>
      [x-cloak] {
        display: none !important;
      }
      .material-symbols-outlined {
        font-variation-settings: "FILL" 0, "wght" 400, "GRAD" 0, "opsz" 24;
      }
      .material-symbols-outlined.fill {
        font-variation-settings: "FILL" 1;
      }
      ::-webkit-scrollbar {
        width: 6px;
        height: 6px;
      }
      ::-webkit-scrollbar-track {
        background: #0a0f1a;
      }
      ::-webkit-scrollbar-thumb {
        background: #1f2937;
        border-radius: 3px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #374151;
      }

      /* Mobile Optimizations */
      * {
        -webkit-tap-highlight-color: transparent;
        -webkit-touch-callout: none;
      }

      /* Safe area padding for notched devices */
      .safe-area-top {
        padding-top: env(safe-area-inset-top);
      }
      .safe-area-bottom {
        padding-bottom: env(safe-area-inset-bottom);
      }
      .safe-area-left {
        padding-left: env(safe-area-inset-left);
      }
      .safe-area-right {
        padding-right: env(safe-area-inset-right);
      }

      /* Prevent pull-to-refresh on mobile */
      body {
        overscroll-behavior-y: contain;
      }

      /* Better touch targets */
      button,
      a,
      input,
      select,
      textarea {
        min-height: 44px;
        min-width: 44px;
      }

      /* Smooth scrolling */
      html {
        scroll-behavior: smooth;
      }

      /* PWA standalone mode adjustments */
      @media (display-mode: standalone) {
        body {
          padding-top: env(safe-area-inset-top);
        }
      }

      /* Mobile landscape adjustments */
      @media (max-height: 500px) and (orientation: landscape) {
        .hide-landscape {
          display: none !important;
        }
      }
    </style>
    {% block head %}{% endblock %}
  </head>
  <body
    class="bg-background-dark font-display text-white antialiased min-h-screen safe-area-left safe-area-right"
  >
    {% block content %}{% endblock %}

    <script src="/static/js/auth.js"></script>

    <!-- Service Worker Registration -->
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("/static/sw.js")
            .then((registration) => {
              console.log("SW registered:", registration.scope);
            })
            .catch((error) => {
              console.log("SW registration failed:", error);
            });
        });
      }

      // PWA Install Prompt
      let deferredPrompt;
      window.addEventListener("beforeinstallprompt", (e) => {
        e.preventDefault();
        deferredPrompt = e;
        // Show install button if needed
        const installBtn = document.getElementById("pwa-install-btn");
        if (installBtn) {
          installBtn.style.display = "flex";
          installBtn.addEventListener("click", () => {
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then((choiceResult) => {
              if (choiceResult.outcome === "accepted") {
                console.log("PWA installed");
              }
              deferredPrompt = null;
              installBtn.style.display = "none";
            });
          });
        }
      });
    </script>
    {% block scripts %}{% endblock %}
  </body>
</html>
